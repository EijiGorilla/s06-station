{"version":3,"file":"static/js/73814.3e71b45b.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/portal/support/layersLoader.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.32/esri/copyright.txt for details.\n*/\nimport e from\"../../core/Error.js\";import{parse as t}from\"../../layers/support/arcgisLayerUrl.js\";import{fetchFeatureService as r}from\"../../layers/support/fetchService.js\";import{LayerLoadContext as a}from\"../../layers/support/LayerLoadContext.js\";import o from\"../Portal.js\";import{createForItemRead as n}from\"./jsonContext.js\";import{getFirstLayerOrTable as s,preprocessFSItemData as l,populateSceneServiceItemData as i,getNumLayersAndTables as u,createSublayerData as p,instanceTypeToLayerTypes as c,getSublayersByLayerType as y,layerTypeToLayerModuleType as m}from\"./loadUtils.js\";import{hasTypeKeyword as d}from\"./portalItemUtils.js\";import{loadStyleRenderer as f}from\"../../renderers/support/styleUtils.js\";import{fetchArcGISServiceJSON as w}from\"../../support/requestPresets.js\";async function h(e,t){const r=e.instance.portalItem;if(r?.id)return await r.load(t),g(e),e.validateItem&&e.validateItem(r),I(e,t)}function g(t){const r=t.instance.portalItem;if(!r?.type||!t.supportedTypes.includes(r.type))throw new e(\"portal:invalid-layer-item-type\",\"Invalid layer item type '${type}', expected '${expectedType}'\",{type:r?.type,expectedType:t.supportedTypes.join(\", \")})}async function I(e,t){const r=e.instance,o=r.portalItem;if(!o)return;const{url:s,title:l}=o,i=n(o,\"portal-item\");if(\"group\"===r.type)return b(r,i,e);s&&\"media\"!==r.type&&r.read({url:s},i);const u=new a,p=await F(e,u,t);return p&&r.read(p,i),r.resourceReferences={portalItem:o,paths:i.readResourcePaths??[]},\"subtype-group\"!==r.type&&r.read({title:l},i),f(r,i)}async function b(t,r,a){const o=t.portalItem;if(!t.sourceIsPortalItem)return;const{title:n,type:s}=o;if(\"Group Layer\"===s){if(!d(o,\"Map\"))throw new e(\"portal:invalid-layer-item-typekeyword\",\"'Group Layer' item without 'Map' type keyword is not supported\");return L(t,a)}return t.read({title:n},r),S(t,a)}async function L(t,r){const a=t.portalItem,o=await a.fetchData(\"json\");if(!o)return;if(!r.populateGroupLayer)throw new e(\"portal:missing-populate-group-layer\",\"Missing populate group layer\");const s=n(a,\"web-map\");t.read(o,s),await r.populateGroupLayer(t,o,{context:s}),t.resourceReferences={portalItem:a,paths:s.readResourcePaths??[]}}async function S(t,r){let o;const{portalItem:n}=t;if(!n)return;const p=n.type,c=r.layerModuleTypeMap;if(!c)throw new e(\"portal:missing-layer-module-type-map\",\"Layer module type map is required to construct sub layers\");switch(p){case\"Feature Service\":case\"Feature Collection\":o=c.FeatureLayer;break;case\"Stream Service\":o=c.StreamLayer;break;case\"Scene Service\":o=c.SceneLayer;break;default:throw new e(\"portal:unsupported-item-type-as-group\",`The item type '${p}' is not supported as a 'IGroupLayer'`)}const y=new a;let[m,d]=await Promise.all([o(),F(r,y)]),f=()=>m;if(\"Feature Service\"===p){const e=s(d)?.customParameters;d=n.url?await l(d,n.url,y):{},f=await D(d,c)||f;const r=await C(n.url,{customParameters:e,loadContext:y});return await v(t,f,f,d,c,r)}return\"Scene Service\"===p&&n.url&&(d=await i(n,d,y)),u(d)>0?await v(t,f,null,d,c):await T(t,f,c)}async function T(e,t,r){const{portalItem:a}=e;if(!a?.url)return;const o=await w(a.url);o&&v(e,t,null,{layers:o.layers?.map(p),tables:o.tables?.map(p)},r)}async function v(e,t,r,a,o,n){let s=a.layers||[];const l=a.tables||[];if(\"Feature Collection\"===e.portalItem?.type?(s.forEach(((e,t)=>{e.id=t,\"Table\"===e?.layerDefinition?.type&&l.push(e)})),s=s.filter((e=>\"Table\"!==e?.layerDefinition?.type))):(s.reverse(),l.reverse()),s.forEach((r=>{const o=n?.(r);if(o||!n){const n=j(e,t(r),a,r,o);e.add(n)}})),l.length){const t=r?null:await o.FeatureLayer();l.forEach((o=>{const s=n?.(o);if(s||!n){const n=j(e,r?r(o):t,a,o,s);e.tables.add(n)}}))}}function j(e,t,r,a,n){const s=e.portalItem,l={portalItem:s.clone(),layerId:a.id};null!=a.url&&(l.url=a.url);const i=new t(l);if(\"sourceJSON\"in i&&(i.sourceJSON=n),\"subtype-group\"!==i.type&&\"catalog\"!==i.type&&(i.sublayerTitleMode=\"service-name\"),\"Feature Collection\"===s.type){const e={origin:\"portal-item\",portal:s.portal||o.getDefault()};i.read(a,e);const t=r.showLegend;null!=t&&i.read({showLegend:t},e)}return i}async function F(e,t,r){if(!1===e.supportsData)return;const a=e.instance,o=a.portalItem;if(!o)return;let n=null;try{n=await o.fetchData(\"json\",r)}catch(l){}if(x(a)){let e=null;const r=await M(o,n,t);if((n?.layers||n?.tables)&&r>0){if(null==a.layerId){const e=c(a.type),t=e?.length?y(n,e)[0]:s(n);t&&(a.layerId=t.id)}e=P(n,a),\"OrientedImageryLayer\"===e?.layerType&&\"oriented-imagery\"===a.type&&a.supportedSourceTypes.add(\"Feature Layer\"),e&&null!=n.showLegend&&(e.showLegend=n.showLegend)}return r>1&&\"sublayerTitleMode\"in a&&\"service-name\"!==a.sublayerTitleMode&&(a.sublayerTitleMode=\"item-title-and-service-name\"),e}return n}async function M(e,r,a){if(r?.layers&&r?.tables)return u(r);const o=t(e.url);if(!o)return 1;const n=await a.fetchServiceMetadata(o.url.path,{customParameters:s(r)?.customParameters}).catch((()=>null));return(r?.layers?.length??n?.layers?.length??0)+(r?.tables?.length??n?.tables?.length??0)}function P(e,t){const{layerId:r}=t,a=e.layers?.find((e=>e.id===r))||e.tables?.find((e=>e.id===r));return a&&G(a,t)?a:null}function x(e){return\"stream\"!==e.type&&\"layerId\"in e}function G(e,t){const r=\"layerType\"in e&&e.layerType,{type:a}=t;return!(\"feature\"===a&&r&&\"ArcGISFeatureLayer\"!==e.layerType||\"catalog\"===a&&!r||\"oriented-imagery\"===a&&!r||\"subtype-group\"===a&&!r)}async function C(e,t){const{layersJSON:a}=await r(e,t);if(!a)return null;const o=[...a.layers,...a.tables];return e=>o.find((t=>t.id===e.id))}async function D(e,t){const{layers:r,tables:a}=e,o=[...r??[],...a??[]];if(!o.length)return;const n=new Set,s=[];for(const{layerType:u}of o){const e=u??\"ArcGISFeatureLayer\";if(n.has(e))continue;n.add(e);const r=t[m(e)];s.push(r())}const l=await Promise.all(s),i=new Map;return Array.from(n).forEach(((e,t)=>{i.set(e,l[t])})),({layerType:e})=>{const t=e??\"ArcGISFeatureLayer\";return i.get(t)}}export{h as load};\n"],"names":["async","h","e","t","r","instance","portalItem","id","load","type","supportedTypes","includes","expectedType","join","g","validateItem","_i$readResourcePaths","o","url","s","title","l","i","n","a","sourceIsPortalItem","d","_s$readResourcePaths","fetchData","populateGroupLayer","read","context","resourceReferences","paths","readResourcePaths","L","p","c","layerModuleTypeMap","FeatureLayer","StreamLayer","SceneLayer","concat","y","m","Promise","all","F","f","_s","customParameters","layers","tables","length","Set","layerType","u","has","add","push","Map","Array","from","forEach","set","_ref3","get","D","layersJSON","find","C","loadContext","v","_o$layers","_o$tables","w","map","T","S","b","I","_e$portalItem","_e$layerDefinition","layerDefinition","filter","_e$layerDefinition2","reverse","j","clone","layerId","sourceJSON","sublayerTitleMode","origin","portal","getDefault","showLegend","supportsData","x","_n","_n2","_s2","_ref","_r$layers$length","_r$layers","_n$layers","_ref2","_r$tables$length","_r$tables","_n$tables","fetchServiceMetadata","path","catch","M","_e","_e$layers","_e$tables","G","P","supportedSourceTypes"],"sourceRoot":""}