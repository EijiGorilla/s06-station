"use strict";(self.webpackChunks06_station=self.webpackChunks06_station||[]).push([[20033],{20033:(o,t,e)=>{e.r(t),e.d(t,{default:()=>x});var s=e(35143),r=e(69539),i=e(69098),n=e(19276),l=e(3975),p=e(42553),a=e(15941),c=e(46053),h=(e(81806),e(76460),e(47249),e(85842)),u=e(40565);let y=class extends(i.A.ClonableMixin(p.A)){constructor(){super(...arguments),this.color=null,this.position=0}};(0,s._)([(0,c.MZ)({type:r.default,json:{type:[u.jz],write:{enabled:!0,isRequired:!0}}})],y.prototype,"color",void 0),(0,s._)([(0,c.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],y.prototype,"position",void 0),y=(0,s._)([(0,h.$)("esri.layers.voxel.VoxelColorStop")],y);const d=y;let f=class extends(i.A.ClonableMixin(p.A)){constructor(){super(...arguments),this.opacity=1,this.position=0}};(0,s._)([(0,c.MZ)({type:Number,json:{name:"alpha",write:{enabled:!0,isRequired:!0}}})],f.prototype,"opacity",void 0),(0,s._)([(0,c.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],f.prototype,"position",void 0),f=(0,s._)([(0,h.$)("esri.layers.voxel.VoxelOpacityStop")],f);const g=f;let b=class extends(i.A.ClonableMixin(p.A)){constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,s._)([(0,c.MZ)({type:Boolean,json:{default:!1,write:!0}})],b.prototype,"enabled",void 0),(0,s._)([(0,c.MZ)({type:[Number],json:{write:{isRequired:!0}}})],b.prototype,"range",void 0),b=(0,s._)([(0,h.$)("esri.layers.voxel.VoxelRangeFilter")],b);const S=b;var M,_;(_=M||(M={}))[_.Color=1]="Color",_[_.Alpha=2]="Alpha",_[_.Both=3]="Both";let v=class extends(i.A.ClonableMixin(p.A)){constructor(o){super(o),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this._colorMapSize=256,this.colorStops=new(n.default.ofType(d)),this.opacityStops=new(n.default.ofType(g))}set colorStops(o){this._set("colorStops",(0,l.V)(o,this._get("colorStops"),n.default.ofType(d)))}set opacityStops(o){this._set("opacityStops",(0,l.V)(o,this._get("opacityStops"),n.default.ofType(g)))}getPreviousNext(o,t,e){let s=o;for(;--s>0&&t[s].type!==e&&t[s].type!==M.Both;);let r=o;const i=t.length;for(;++r<i&&t[r].type!==e&&t[r].type!==M.Both;);return[s,r]}get rasterizedTransferFunction(){const o=[];if(this.colorStops.length<2)return o;const t=[],e=[];for(const r of this.colorStops){if(!r.color)return o;e.push({color:{r:r.color.r,g:r.color.g,b:r.color.b,a:Math.round(255*(1-r.color.a))},position:r.position,type:M.Color})}if(0===this.opacityStops.length)for(const r of e)t.push({color:r.color,position:r.position});else{for(const t of this.opacityStops){const o=(0,a.qE)(t.position,0,1),s=Math.round(255*(0,a.qE)(1-t.opacity,0,1));let r=!1;for(const t of e)if(t.type===M.Color&&Math.abs(t.position-o)<1e-5){t.color.a=s,t.type=M.Both,r=!0;break}r||e.push({color:{r:0,g:0,b:0,a:s},position:t.position,type:M.Alpha})}e.sort((o,t)=>o.position<t.position?-1:1);const o=e.length;for(let t=0;t<o;++t){const s=e[t];if(s.type!==M.Both)if(s.type===M.Color){const[r,i]=this.getPreviousNext(t,e,M.Alpha);if(-1!==r&&i!==o){const o=(s.position-e[r].position)/(e[i].position-e[r].position);s.color.a=Math.round((0,a.Cc)(e[r].color.a,e[i].color.a,o))}else s.color.a=-1!==r?e[r].color.a:e[i].color.a}else{const[r,i]=this.getPreviousNext(t,e,M.Color);if(-1!==r&&i!==o){const o=(s.position-e[r].position)/(e[i].position-e[r].position),t=e[r].color,n=e[i].color;C.forEach(e=>{s.color[e]=Math.round((0,a.Cc)(t[e],n[e],o))})}else-1!==r?C.forEach(o=>{s.color[o]=e[r].color[o]}):C.forEach(o=>{s.color[o]=e[i].color[o]})}}for(const s of e)t.push({color:s.color,position:s.position})}t[0].position=0,t[t.length-1].position=1;let s=0,i=1;for(let n=0;n<this._colorMapSize;++n){const e=n/this._colorMapSize;for(;e>t[i].position;)s=i++;const l=(e-t[s].position)/(t[i].position-t[s].position),p=t[s].color,c=t[i].color,h=new r.default;C.forEach(o=>{h[o]=Math.round((0,a.Cc)(p[o],c[o],l))}),h.a=(0,a.qE)(1-(0,a.Cc)(p.a,c.a,l)/255,0,1),o.push(h)}return o}getColorForContinuousDataValue(o,t){const e=this.rasterizedTransferFunction;if(this.colorStops.length<2||!Array.isArray(this.stretchRange)||this.stretchRange.length<2||e.length<256)return null;let s=this.stretchRange[0],r=this.stretchRange[1];if(s>r){const o=s;s=r,r=o}o=(0,a.qE)(o,s,r);const i=e[Math.round((o-s)/(r-s)*(this._colorMapSize-1))].clone();return t||(i.a=1),i}};(0,s._)([(0,c.MZ)({type:["linear","nearest"],json:{write:!0}})],v.prototype,"interpolation",void 0),(0,s._)([(0,c.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],v.prototype,"stretchRange",void 0),(0,s._)([(0,c.MZ)({type:n.default.ofType(d),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],v.prototype,"colorStops",null),(0,s._)([(0,c.MZ)({type:n.default.ofType(g),json:{read:{source:"alphaStops"},write:{enabled:!0,target:"alphaStops",overridePolicy(){return{enabled:!!this.opacityStops&&this.opacityStops.length>0}}}}})],v.prototype,"opacityStops",null),(0,s._)([(0,c.MZ)({type:S,json:{write:!0}})],v.prototype,"rangeFilter",void 0),(0,s._)([(0,c.MZ)({type:[r.default],clonable:!1,json:{read:!1}})],v.prototype,"rasterizedTransferFunction",null),v=(0,s._)([(0,h.$)("esri.layers.voxel.VoxelTransferFunctionStyle")],v);const x=v,C=["r","g","b"]}}]);
//# sourceMappingURL=20033.56f18763.chunk.js.map