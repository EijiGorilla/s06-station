"use strict";(self.webpackChunks06_station=self.webpackChunks06_station||[]).push([[10156],{10156:(t,e,n)=>{n.r(e),n.d(e,{assetMapFromAssetMapsJSON:()=>y,extractMesh:()=>g,meshFeatureSetFromJSON:()=>d});var r=n(39356),a=n(76460),s=n(87663),o=n(76797),i=n(10851),l=n(13312),u=n(57045),c=n(19463),f=n(77725),p=n(74159);const m=()=>a.A.getLogger("esri.rest.support.meshFeatureSet");function d(t,e,n){var a;const s=n.features;n.features=[],delete n.geometryType;const o=f.default.fromJSON(n);if(o.geometryType="mesh",!n.assetMaps)return o;const i=y(e,n.assetMaps),u=null!==(a=t.sourceSpatialReference)&&void 0!==a?a:l.default.WGS84,c=n.globalIdFieldName,{outFields:p}=t,m=null!=p&&p.length>0?(d=p.includes("*")?null:new Set(p),t=>{let{attributes:e}=t;if(!e)return{};if(!d)return e;for(const n in e)d.has(n)||delete e[n];return e}):()=>({});var d;for(const l of s){const t=g(l,c,u,e,i);o.features.push(new r.default({geometry:t,attributes:m(l)}))}return o}function g(t,e,n,r,a){const s=t.attributes[e],l=a.get(s);if(null==l||!t.geometry)return null;const c=(0,p.V)(t.attributes,n,r.transformFieldRoles),f=o.default.fromJSON(t.geometry);f.spatialReference=n;const m=(0,p.f)(t.attributes,r.transformFieldRoles),d=n.isGeographic?"local":"georeferenced",g=function(t){const e=Array.from(t.files.values()),n=new Array;for(const r of e){if(r.status!==h.COMPLETED)return null;const t=new Array;for(const e of r.parts){if(!e)return null;t.push(new u.Bq(e.url,e.hash))}n.push(new u.Qp(r.name,r.mimeType,t))}return n}(l);return g?i.default.createWithExternalSource(c,g,{extent:f,transform:m,vertexSpace:d,unitConversionDisabled:!0}):i.default.createIncomplete(c,{extent:f,transform:m,vertexSpace:d})}var h,E;function y(t,e){const n=new Map;for(const r of e){const e=r.parentGlobalId;if(null==e)continue;const a=r.assetName,o=r.assetType,i=r.assetHash,l=r.assetURL,u=r.conversionStatus,f=r.seqNo,p=(0,c.Fm)(o,t.supportedFormats);if(!p){m().error("mesh-feature-set:unknown-format","Service returned an asset of type ".concat(o,", but it does not list it as a supported type"));continue}const d=(0,s.tE)(n,e,()=>({files:new Map}));(0,s.tE)(d.files,a,()=>({name:a,type:o,mimeType:p,status:S(u),parts:[]})).parts[f]={hash:i,url:l}}return n}function S(t){switch(t){case"COMPLETED":case"SUBMITTED":return h.COMPLETED;case"INPROGRESS":return h.PENDING;default:return h.FAILED}}(E=h||(h={}))[E.FAILED=0]="FAILED",E[E.PENDING=1]="PENDING",E[E.COMPLETED=2]="COMPLETED"},74159:(t,e,n)=>{n.d(e,{V:()=>s,f:()=>o});var r=n(19247),a=n(32186);function s(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new r.default({x:t[n.originX],y:t[n.originY],z:t[n.originZ],spatialReference:e})}function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return new a.default({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}const i={originX:"originX",originY:"originY",originZ:"originZ",translationX:"translationX",translationY:"translationY",translationZ:"translationZ",scaleX:"scaleX",scaleY:"scaleY",scaleZ:"scaleZ",rotationX:"rotationX",rotationY:"rotationY",rotationZ:"rotationZ",rotationDeg:"rotationDeg"}}}]);
//# sourceMappingURL=10156.9a166228.chunk.js.map