"use strict";(self.webpackChunks06_station=self.webpackChunks06_station||[]).push([[60831],{60831:(e,t,i)=>{i.r(t),i.d(t,{default:()=>S});var n=i(35143),s=i(91967),r=i(76931),a=i(31633),o=i(46053),l=(i(81806),i(76460),i(47249),i(85842)),c=i(19247),u=i(23701),d=i(13312),h=i(7137),p=i(73953),m=i(80963),w=i(45417),f=i(47818);function v(e){let{state:{paddedViewState:t},spatialReference:i,width:n}=e;return i.isWrappable&&t.worldScreenWidth<n}function g(e,t){const{x:i,y:n}=e?(0,w.webMercatorToGeographic)(t,!0):t;return[i,n]}let _=class extends s.default{constructor(e){super(e),this.scaleComputedFrom=(0,r.tc)(),this.view=null}get state(){var e;return null!==(e=this.view)&&void 0!==e&&e.ready&&"2d"===this.view.type?(0,f.O)(this.view)&&!this.view.inGeographicLayout?"disabled":"ready":"disabled"}getScaleBarProperties(e,t){if("disabled"===this.state||isNaN(e)||!t||!this.view)return null;const i=this._getDistanceInMeters();return null==i?null:this._getScaleBarProps(e,i,t)}_getDistanceInMeters(){const{state:e,spatialReference:t}=this.view;if(!(0,m.fn)(t))return null;const{isGeographic:i}=t,n=function(e){var t,i;const{isWebMercator:n,wkt:s,wkt2:r}=e;return n||null!==(t=null===(i=r||s)||void 0===i?void 0:i.includes("WGS_1984_Web_Mercator"))&&void 0!==t&&t}(t);var s;if(!i&&!n)return e.extent.width*(null!==(s=(0,a.Ao)(t))&&void 0!==s?s:1);const[r,o]=this._getScaleMeasuringPoints(),l=n||i&&!(0,h.isSupported)(t)?d.default.WGS84:t,c=new u.default({paths:[[g(n,r),g(n,o)]],spatialReference:l}),w=(0,p.straightLineDensify)(c,10);let f;try{[f]=(0,h.geodesicLengths)([w],"meters")}catch(v){return null}return f}_getScaleMeasuringPoints(){const e=this.view,{width:t,height:i,position:n,spatialReference:s}=e;if(v(e)){const e=(0,m.Vp)(s),{valid:t}=e;return[new c.default(t[0],0,s),new c.default(t[1],0,s)]}let a=this.scaleComputedFrom.y-n[1];a>i?a=i:a<0&&(a=0);const o=(0,r.tc)(0,a),l=(0,r.tc)(t,a);return[e.toMap(o),e.toMap(l)]}_getScaleBarProps(e,t,i){const n=this.view,s=e*t/(v(n)?n.state.paddedViewState.worldScreenWidth:n.width);if(s<.001)return null;const r=function(e,t){switch(t){case"metric":return e>1e3?{distance:(0,a.oU)(e,"meters","kilometers"),unit:"kilometer"}:e>1?{distance:e,unit:"meter"}:e>.01?{distance:(0,a.oU)(e,"meters","centimeters"),unit:"centimeter"}:{distance:(0,a.oU)(e,"meters","millimeters"),unit:"millimeter"};case"imperial":return e>1609.344?{distance:(0,a.oU)(e,"meters","miles"),unit:"mile"}:e>.3048?{distance:(0,a.oU)(e,"meters","feet"),unit:"foot"}:{distance:(0,a.oU)(e,"meters","inches"),unit:"inch"}}}(s,i),{distance:o,unit:l}=r;let c=o,u=0;for(;c>=1;)c/=10,u++;const{min:d,max:h}=function(e){return e>.5?{min:.5,max:1}:e>.2?{min:.2,max:.5}:{min:.1,max:.2}}(c),p=h/c>=c/d?d:h;return{length:e*(p/c),value:10**u*p,unit:l}}};(0,n._)([(0,o.MZ)()],_.prototype,"scaleComputedFrom",void 0),(0,n._)([(0,o.MZ)({readOnly:!0})],_.prototype,"state",null),(0,n._)([(0,o.MZ)()],_.prototype,"view",void 0),_=(0,n._)([(0,l.$)("esri.widgets.ScaleBar.ScaleBarViewModel")],_);const S=_}}]);
//# sourceMappingURL=60831.2179f659.chunk.js.map