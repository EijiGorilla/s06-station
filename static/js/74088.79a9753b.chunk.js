"use strict";(self.webpackChunks06_station=self.webpackChunks06_station||[]).push([[74088],{74088:(t,e,l)=>{l.d(e,{A:()=>E,previewSymbol2D:()=>j});var i=l(89379),o=l(69539),n=l(59784),a=l(50076),s=l(85504),d=l(76931),u=l(76279),h=l(87840),r=l(65709),c=l(26291),v=l(27790);const p="picture-fill",m="picture-marker",g="simple-fill",f="simple-line",y="simple-marker",w="text",x="Aa",b=r.CB.size,z=r.CB.maxSize,L=r.CB.maxOutlineSize,M=r.CB.lineWidth,S=225,k=document.createElement("canvas");function C(t,e,l){if("polygon"===t.type){const i=t.extent,o=0===i.width?1:i.width,n=0===i.height?1:i.height;t=(0,u.wp)({originPosition:"upperLeft",scale:[o/e,n/l],translate:[i.xmin,i.ymax]},{},t);let a="";for(let e=0;e<t.rings.length;e++){const l=t.rings[e];for(let t=0;t<l.length;t++){const e=l[t][0],i=l[t][1];let o="";0===t?(o="M".concat(e.toString()," ").concat(i.toString()),""!==a&&(o=" ".concat(o)),a+=o):t===l.length-1?(o="l".concat(e.toString()," ").concat(i.toString()," Z"),""!==a&&(o=" ".concat(o)),a+=o):(o="l".concat(e.toString()," ").concat(i.toString()),""!==a&&(o=" ".concat(o)),a+=o)}}return a}if("polyline"===t.type){const i=t.extent,o=0===i.width?1:i.width,n=0===i.height?1:i.height;t=(0,u.QE)({originPosition:"upperLeft",scale:[o/e,n/l],translate:[i.xmin,i.ymax]},{},t);let a="";for(let e=0;e<t.paths.length;e++){const l=t.paths[e];for(let t=0;t<l.length;t++){const e=l[t][0],i=l[t][1];let o="";0===t?(o="M".concat(e.toString()," ").concat(i.toString()),""!==a&&(o=" ".concat(o)),a+=o):(o="l".concat(e.toString()," ").concat(i.toString()),""!==a&&(o=" ".concat(o)),a+=o)}}return a}return""}function A(t,e){const l=k.getContext("2d"),i=[];e&&(e.weight&&i.push(e.weight),e.size&&i.push(e.size+"px"),e.family&&i.push(e.family)),l.font=i.join(" ");const{width:o,actualBoundingBoxLeft:n,actualBoundingBoxRight:a,actualBoundingBoxAscent:s,actualBoundingBoxDescent:d}=l.measureText(t);return{width:Math.ceil(Math.max(o,n+a)),height:Math.ceil(s+d),x:Math.floor(n),y:Math.floor((s-d)/2)}}function B(t){const e=null===t||void 0===t?void 0:t.size;return{width:null!=e&&"object"==typeof e&&"width"in e?(0,d.Lz)(e.width):null,height:null!=e&&"object"==typeof e&&"height"in e?(0,d.Lz)(e.height):null}}function P(t,e){return t>e?"dark":"light"}async function j(t,e){var l;const{shapeDescriptor:o,size:n,renderOptions:u,outputSize:S}=function(t,e){var l,o;const n="number"==typeof(null===e||void 0===e?void 0:e.size)?null===e||void 0===e?void 0:e.size:null,a=null!=n?(0,d.Lz)(n):null,s=null!=(null===e||void 0===e?void 0:e.maxSize)?(0,d.Lz)(e.maxSize):null;let u="angle"in t?t.angle:null;null!=(null===e||void 0===e?void 0:e.rotation)&&(u=(null!==u&&void 0!==u?u:0)+e.rotation);const c=(0,h.eH)(t);let v=(0,h.$4)(t);"dark"!==E(t,245)||(null===e||void 0===e?void 0:e.ignoreWhiteSymbols)||(v=(0,i.A)((0,i.A)({width:.75},v),{},{color:"#bdc3c7"}));let S=null;const k={shape:null,fill:c,stroke:v,offset:[0,0]};(null===(l=v)||void 0===l?void 0:l.width)&&(v.width=Math.min(v.width,L));const P=(null===(o=v)||void 0===o?void 0:o.width)||0;let j=null!=(null===e||void 0===e?void 0:e.size)&&(null==(null===e||void 0===e?void 0:e.scale)||(null===e||void 0===e?void 0:e.scale)),D=0,F=0,Z=!1;switch(t.type){case y:{const l=t.style,{width:i,height:o}=B(e);let n=i===o&&null!=i?i:null!=a?a:Math.min((0,d.Lz)(t.size),s||z);if(!0===(null===e||void 0===e?void 0:e.useMarkerSymbolSize)&&null!==i&&null!==o){const e=Math.min((0,d.Lz)(t.size),s||z);n=e>i&&e>o?Math.min(i,o):e}switch(D=n,F=n,l){case"circle":k.shape={type:"circle",cx:0,cy:0,r:.5*n},j||(D+=P,F+=P);break;case"cross":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[D,.5*F]},{command:"M",values:[.5*D,0]},{command:"L",values:[.5*D,F]}]};break;case"diamond":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[.5*D,0]},{command:"L",values:[D,.5*F]},{command:"L",values:[.5*D,F]},{command:"Z",values:[]}]},j||(D+=P,F+=P);break;case"square":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},j||(D+=P,F+=P),u&&(Z=!0);break;case"triangle":k.shape={type:"path",path:[{command:"M",values:[.5*D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},j||(D+=P,F+=P),u&&(Z=!0);break;case"x":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,F]},{command:"M",values:[D,0]},{command:"L",values:[0,F]}]},u&&(Z=!0);break;case"path":k.shape={type:"path",path:t.path||""},j||(D+=P,F+=P),u&&(Z=!0),j=!0}break}case f:{var O,W,q;const{width:t,height:l}=B(e),i=(0,h.O0)(v).reduce((t,e)=>t+e,0),o=i&&Math.ceil(M/i),n=null!==(O=null!==l&&void 0!==l?l:a)&&void 0!==O?O:P,s=null!==t&&void 0!==t?t:i*o||M;if(j=!0,"polyline"===(null===e||void 0===e||null===(W=e.geometry)||void 0===W?void 0:W.type)&&null!==e&&void 0!==e&&null!==(q=e.geometry)&&void 0!==q&&q.extent){var H;D=s,F=null!==l&&void 0!==l?l:D;const t=1e3,i=.15*t;S=[D,F],F=S[0]>S[1]?t*S[1]/S[0]:t,D=S[0]>S[1]?t:t*S[0]/S[1],null!==(H=v)&&void 0!==H&&H.width&&(v.width=v.width*t/(S[1]>S[0]?S[1]:S[0]),v.width>i&&(v.width=i)),k.shape={type:"path",path:C(e.geometry,D,F)}}else D=null!=(null===e||void 0===e?void 0:e.maxSize)?Math.min(s,e.maxSize):s,F=n,v&&(v.width=n),k.shape={type:"path",path:[{command:"M",values:[n/2,F/2]},{command:"L",values:[D-n/2,F/2]}]};break}case p:case g:{var Q,T,N;const t="object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&!(null===e||void 0===e||null===(Q=e.symbolConfig)||void 0===Q||!Q.isSquareFill),{width:l,height:i}=B(e);D=!t&&l!==i||null==l?null!=a?a:b:l,F=!t&&l!==i||null==i?D:i,j||(D+=P,F+=P),j=!0,null!==e&&void 0!==e&&null!==(T=e.geometry)&&void 0!==T&&T.extent&&"polygon"===(null===e||void 0===e||null===(N=e.geometry)||void 0===N?void 0:N.type)?(S=[D,F],F=S[0]>S[1]?1e3*S[1]/S[0]:1e3,D=S[0]>S[1]?1e3:1e3*S[0]/S[1],k.shape={type:"path",path:C(e.geometry,D,F)}):k.shape=t?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:r.nq.fill[0];break}case m:{const l=Math.min((0,d.Lz)(t.width),s||z),i=Math.min((0,d.Lz)(t.height),s||z),{width:o,height:n}=B(e),h=o===n&&null!=o?o:null!=a?a:Math.max(l,i),r=t.width/t.height;D=r<=1?Math.ceil(h*r):h,F=r<=1?h:Math.ceil(h/r),k.shape={type:"image",x:-Math.round(D/2),y:-Math.round(F/2),width:D,height:F,src:t.url||""},u&&(Z=!0);break}case w:{const l=t,i=(null===e||void 0===e?void 0:e.overrideText)||l.text||x,o=l.font,{width:n,height:u}=B(e),h=null!=u?u:null!=a?a:Math.min((0,d.Lz)(o.size),s||z),{width:r,height:c}=A(i,{weight:o.weight,size:h,family:o.family}),v=/[\uE600-\uE6FF]/.test(i);D=null!==n&&void 0!==n?n:v?h:r,F=v?h:c;let p=.5*(v?h:c);v&&(p+=5),k.shape={type:"text",text:i,x:l.xoffset||0,y:l.yoffset||p,align:"middle",alignBaseline:l.verticalAlignment,decoration:o&&o.decoration,rotated:l.rotated,kerning:l.kerning},k.font=o&&{size:h,style:o.style,decoration:o.decoration,weight:o.weight,family:o.family};break}}return{shapeDescriptor:k,size:[D,F],outputSize:S,renderOptions:{node:null===e||void 0===e?void 0:e.node,scale:j,opacity:null===e||void 0===e?void 0:e.opacity,rotations:[u],useRotationSize:Z,effectView:null===e||void 0===e?void 0:e.effectView,ariaLabel:null===e||void 0===e?void 0:e.ariaLabel}}}(t,e);if(!o.shape)throw new a.default("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(t,e){const l=e.fill,i=t.color;if("pattern"===(null===l||void 0===l?void 0:l.type)&&i&&t.type!==p){const t=await(0,h.rc)(l.src,i.toCss(!0));l.src=t,e.fill=l}}(t,o),await async function(t,e,l,i){if(!("font"in t)||!t.font||"text"!==e.shape.type)return;try{await(0,s.Al)(t.font)}catch(h){}const{width:o,height:n}=B(i);if(!/[\uE600-\uE6FF]/.test(e.shape.text)){var a,d,u;const{width:s,height:h,x:r,y:c}=A(e.shape.text,{weight:null===(a=e.font)||void 0===a?void 0:a.weight,size:null===(d=e.font)||void 0===d?void 0:d.size,family:null===(u=e.font)||void 0===u?void 0:u.family});l[0]=null!==o&&void 0!==o?o:s,l[1]=null!==n&&void 0!==n?n:h,e.shape.x=r,e.shape.y=c;let v="angle"in t?t.angle:null;if(null!=(null===i||void 0===i?void 0:i.rotation)&&(v=(null!==v&&void 0!==v?v:0)+i.rotation),v){const t=v*(Math.PI/180),e=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t));l[1]=l[0]*e+l[1]*i}}}(t,o,n,e);const k=[[o]];if("object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&null!==e&&void 0!==e&&null!==(l=e.symbolConfig)&&void 0!==l&&l.applyColorModulation){const t=.6*n[0];k.unshift([(0,i.A)((0,i.A)({},o),{},{offset:[-t,0],fill:(0,r.QC)(o.fill,-.3)})]),k.push([(0,i.A)((0,i.A)({},o),{},{offset:[t,0],fill:(0,r.QC)(o.fill,.3)})]),n[0]+=2*t,u.scale=!1}"text"===t.type&&function(t,e,l,o,n){var a;if(null!=t.haloColor&&null!=t.haloSize){var s;null!==(s=n.masking)&&void 0!==s||(n.masking=l.map(()=>[]));const a=(0,d.Lz)(t.haloSize);o[0]+=a,o[1]+=a,l.unshift([(0,i.A)((0,i.A)({},e),{},{fill:null,stroke:{color:t.haloColor,width:2*a,join:"round",cap:"round"}})]),n.masking.unshift([{shape:{type:"rect",x:0,y:0,width:o[0]+2*v.y7,height:o[1]+2*v.y7},fill:[255,255,255],stroke:null},(0,i.A)((0,i.A)({},e),{},{fill:[0,0,0,0],stroke:null})])}null==t.backgroundColor&&null==t.borderLineColor||(o[0]+=2*v.y7,o[1]+=2*v.y7,l.unshift([{shape:{type:"rect",x:0,y:0,width:o[0],height:o[1]},fill:t.backgroundColor,stroke:{color:t.borderLineColor,width:(0,d.Lz)(t.borderLineSize)}}]),null===(a=n.masking)||void 0===a||a.unshift([]))}(t,o,k,n,u);const P=(0,c.fz)(k,n,u);if(S&&P){var j,D,F,Z;const t="img"===P.nodeName.toLowerCase()?P:P.firstChild;"svg"===t.nodeName.toLowerCase()&&t.setAttribute("viewBox","0 0 ".concat(n[0].toString()," ").concat(n[1].toString())),t.setAttribute("width",S[0].toString()),t.setAttribute("height",S[1].toString()),S.length>2&&(t.style.setProperty("padding-left",(null===(j=S[2])||void 0===j?void 0:j.toString())+"px"),t.style.setProperty("padding-right",(null===(D=S[2])||void 0===D?void 0:D.toString())+"px"),t.style.setProperty("padding-top",(null===(F=S[3])||void 0===F?void 0:F.toString())+"px"),t.style.setProperty("padding-bottom",(null===(Z=S[3])||void 0===Z?void 0:Z.toString())+"px"),t.style.setProperty("box-sizing","border-box"))}return P}function E(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;const l=(0,h.eH)(t),i=(0,h.$4)(t),a=!l||"type"in l?null:new o.default(l),s=null!==i&&void 0!==i&&i.color?new o.default(null===i||void 0===i?void 0:i.color):null,d=a?P((0,n.Ws)(a),e):null,u=s?P((0,n.Ws)(s),e):null;return u?d?d===u?d:e>=S?"light":"dark":u:d}}}]);
//# sourceMappingURL=74088.79a9753b.chunk.js.map